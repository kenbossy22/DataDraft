<!DOCTYPE html>
<html>
<head>
  <title>3D Scatterplot in VR</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
  <a-scene>
    <!-- Sky -->
    <a-sky color="#000" radius="50"></a-sky>

    <!-- Axes -->
    <a-entity>
      <a-box position="5 0 0" width="10" height="0.05" depth="0.05" color="red"></a-box>
      <a-text value="Completeness Rating" position="10.5 0.2 0" rotation="0 0 0" color="red"></a-text>

      <a-box position="0 5 0" width="0.05" height="10" depth="0.05" color="green"></a-box>
      <a-text value="PtPG" position="0 10.5 0.2" rotation="0 0 0" color="green"></a-text>

      <a-box position="0 0 5" width="0.05" height="0.05" depth="10" color="blue"></a-box>
      <a-text value="Weighted Rating" position="0.2 0 10.5" rotation="0 0 0" color="blue"></a-text>
    </a-entity>

    <!-- Data Points -->
    <a-entity id="scatterplot" position="0 0 0"></a-entity>

    <!-- Camera -->
    <a-camera position="0 5 20" wasd-controls="enabled: true" look-controls>
      <a-cursor></a-cursor>
    </a-camera>

    <!-- Controllers -->
    <a-entity id="left-controller" hand-controls="hand: left" oculus-touch-controls>
      <a-text id="left-controller-info" position="0 0.5 -0.5" align="center" color="yellow" scale="0.5 0.5 0.5"></a-text>
    </a-entity>
    <a-entity id="right-controller" hand-controls="hand: right" oculus-touch-controls>
      <a-text id="right-controller-info" position="0 0.5 -0.5" align="center" color="yellow" scale="0.5 0.5 0.5"></a-text>
    </a-entity>
  </a-scene>

  <script>
    const leftController = document.getElementById('left-controller');
    const rightController = document.getElementById('right-controller');
    const leftInfo = document.getElementById('left-controller-info');
    const rightInfo = document.getElementById('right-controller-info');

    function updateControllerInfo() {
      // Get the state of connected controllers
      const gamepads = navigator.getGamepads();

      if (gamepads) {
        const leftGamepad = gamepads.find(gp => gp && gp.hand === 'left');
        const rightGamepad = gamepads.find(gp => gp && gp.hand === 'right');

        if (leftGamepad) {
          leftInfo.setAttribute('value',
            `Left Controller:
Joystick X: ${leftGamepad.axes[0].toFixed(2)}
Joystick Y: ${leftGamepad.axes[1].toFixed(2)}
[Y] Button: ${leftGamepad.buttons[4].pressed}
[X] Button: ${leftGamepad.buttons[3].pressed}
Trigger: ${leftGamepad.buttons[0].pressed}
Grip: ${leftGamepad.buttons[1].pressed}`
          );
        }

        if (rightGamepad) {
          rightInfo.setAttribute('value',
            `Right Controller:
Joystick X: ${rightGamepad.axes[2].toFixed(2)}
Joystick Y: ${rightGamepad.axes[3].toFixed(2)}
[B] Button: ${rightGamepad.buttons[1].pressed}
[A] Button: ${rightGamepad.buttons[0].pressed}
Trigger: ${rightGamepad.buttons[0].pressed}
Grip: ${rightGamepad.buttons[1].pressed}`
          );
        }
      }

      requestAnimationFrame(updateControllerInfo);
    }

    updateControllerInfo();
  </script>
</body>
</html>
